var N=(m,k,f)=>new Promise((A,g)=>{var w=c=>{try{o(f.next(c))}catch(p){g(p)}},i=c=>{try{o(f.throw(c))}catch(p){g(p)}},o=c=>c.done?A(c.value):Promise.resolve(c.value).then(w,i);o((f=f.apply(m,k)).next())});import{b as pe,d as Ce,j as L,M as me,aP as v,L as fe,r as a,o as d,c as b,f as e,w as t,u,Q as G,a3 as Fe,a4 as Ee,p as y,g as _,t as T,cN as z,E as h,F as V,q as $,v as ge,x as ve,at as be,cO as he,W as x}from"./index-67a30bc6.js";import{_ as ye}from"./noImage-91f53245.js";import{F as O}from"./fileTypeEnum-2ae15dd8.js";import{u as ke,m as C}from"./chartEditStore-8254eca3.js";/* empty css                                                                   */import{i as H}from"./icon-99a136c4.js";import{l as Ae}from"./index-9e9f2d34.js";import{_ as we}from"./StylesSetting-0bcb3f5a.js";import"./plugin-463a9df8.js";import"./theme-color-0deb5eeb.js";import"./SettingItemBox-a2ea547e.js";import"./CollapseItem-92fb7302.js";const Be=m=>(ge("data-v-63c1ec26"),m=m(),ve(),m),Se={class:"go-canvas-setting"},De=["src"],Ie={class:"upload-img"},Le=Be(()=>y("img",{src:ye},null,-1)),Te=_("\u80CC\u666F\u989C\u8272"),ze={class:"picker-height"},xe=_("\u5E94\u7528\u7C7B\u578B"),Oe=_("\u80CC\u666F\u63A7\u5236"),Ue=_(" \u6E05\u9664\u80CC\u666F "),Re=_(" \u6E05\u9664\u989C\u8272 "),Pe=_("\u9002\u914D\u65B9\u5F0F"),Ne=Ce({__name:"index",setup(m){const{ColorPaletteIcon:k}=H.ionicons5,{ScaleIcon:f,FitToScreenIcon:A,FitToHeightIcon:g,FitToWidthIcon:w}=H.carbon,i=ke(),o=i.getEditCanvasConfig,c=i.getEditCanvas,p=L(),B=L(!1),S=L(0),M=Ae(()=>me(()=>import("./index-a0c0e834.js"),["static/js/index-a0c0e834.js","static/css/index-8b1e35bc.css","static/js/index-67a30bc6.js","static/css/index-c34cea1e.css","static/js/chartEditStore-8254eca3.js","static/js/plugin-463a9df8.js","static/js/icon-99a136c4.js"])),Y=[{label:"\u5E94\u7528\u989C\u8272",value:0},{label:"\u5E94\u7528\u80CC\u666F",value:1}],X=["#232324","#2a2a2b","#313132","#373739","#757575","#e0e0e0","#eeeeee","#fafafa"],K=[{key:"ChartTheme",title:"\u4E3B\u9898\u989C\u8272",icon:k,render:M}],W=[{key:v.FIT,title:"\u81EA\u9002\u5E94",icon:f,desc:"\u81EA\u9002\u5E94\u6BD4\u4F8B\u5C55\u793A\uFF0C\u9875\u9762\u4F1A\u6709\u7559\u767D"},{key:v.SCROLL_Y,title:"Y\u8F74\u6EDA\u52A8",icon:w,desc:"X\u8F74\u94FA\u6EE1\uFF0CY\u8F74\u81EA\u9002\u5E94\u6EDA\u52A8"},{key:v.SCROLL_X,title:"X\u8F74\u6EDA\u52A8",icon:g,desc:"Y\u8F74\u94FA\u6EE1\uFF0CX\u8F74\u81EA\u9002\u5E94\u6EDA\u52A8"},{key:v.FULL,title:"\u94FA\u6EE1",icon:A,desc:"\u5F3A\u884C\u62C9\u4F38\u753B\u9762\uFF0C\u586B\u5145\u6240\u6709\u89C6\u56FE"}];fe(()=>o.selectColor,s=>{S.value=s?0:1},{immediate:!0});const U=s=>s>50,R=()=>{i.computedScale()},j=l=>N(this,[l],function*({file:s}){p.value=[];const r=s.file.type;return s.file.size>1024*1024*z?(window.$message.warning(`\u56FE\u7247\u8D85\u51FA ${z}M \u9650\u5236\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\uFF01`),!1):r!==O.PNG&&r!==O.JPEG&&r!==O.GIF?(window.$message.warning("\u6587\u4EF6\u683C\u5F0F\u4E0D\u7B26\u5408\uFF0C\u8BF7\u91CD\u65B0\u4E0A\u4F20\uFF01"),!1):!0}),q=s=>{o.selectColor=s==0},J=()=>{i.setEditCanvasConfig(C.BACKGROUND_IMAGE,void 0),i.setEditCanvasConfig(C.SELECT_COLOR,!0)},Q=()=>{B.value=!0,setTimeout(()=>{B.value=!1})},Z=()=>{i.setEditCanvasConfig(C.BACKGROUND,void 0),o.backgroundImage&&i.setEditCanvasConfig(C.SELECT_COLOR,!1),Q()},ee=s=>{const{file:l}=s;be(()=>{if(l.file){const r=he(l.file);i.setEditCanvasConfig(C.BACKGROUND_IMAGE,r),i.setEditCanvasConfig(C.SELECT_COLOR,!1)}else window.$message.error("\u6DFB\u52A0\u56FE\u7247\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u91CD\u8BD5\uFF01")})},te=s=>{i.setEditCanvasConfig(C.PREVIEW_SCALE_TYPE,s)};return(s,l)=>{const r=a("n-input-number"),D=a("n-form-item"),oe=a("n-form"),E=a("n-text"),ne=a("n-upload-dragger"),ue=a("n-upload"),ae=a("n-card"),se=a("n-color-picker"),F=a("n-space"),le=a("n-select"),I=a("n-button"),P=a("n-icon"),ie=a("n-tooltip"),ce=a("n-button-group"),re=a("n-divider"),de=a("n-tab-pane"),_e=a("n-tabs");return d(),b("div",Se,[e(oe,{inline:"","label-width":45,size:"small","label-placement":"left"},{default:t(()=>[e(D,{label:"\u5BBD\u5EA6"},{default:t(()=>[e(r,{size:"small",value:u(o).width,"onUpdate:value":[l[0]||(l[0]=n=>u(o).width=n),R],disabled:u(c).lockScale,validator:U},null,8,["value","disabled"])]),_:1}),e(D,{label:"\u9AD8\u5EA6"},{default:t(()=>[e(r,{size:"small",value:u(o).height,"onUpdate:value":[l[1]||(l[1]=n=>u(o).height=n),R],disabled:u(c).lockScale,validator:U},null,8,["value","disabled"])]),_:1})]),_:1}),e(ae,{class:"upload-box"},{default:t(()=>[e(ue,{"file-list":p.value,"onUpdate:file-list":l[2]||(l[2]=n=>p.value=n),"show-file-list":!1,customRequest:ee,onBeforeUpload:j},{default:t(()=>[e(ne,null,{default:t(()=>[u(o).backgroundImage?(d(),b("img",{key:0,class:"upload-show",src:u(o).backgroundImage,alt:"\u80CC\u666F"},null,8,De)):G("",!0),Fe(y("div",Ie,[Le,e(E,{class:"upload-desc",depth:"3"},{default:t(()=>[_(" \u80CC\u666F\u56FE\u9700\u5C0F\u4E8E "+T(u(z))+"M \uFF0C\u683C\u5F0F\u4E3A png/jpg/gif \u7684\u6587\u4EF6 ",1)]),_:1})],512),[[Ee,!u(o).backgroundImage]])]),_:1})]),_:1},8,["file-list"])]),_:1}),e(F,{vertical:"",size:12},{default:t(()=>[e(F,null,{default:t(()=>[e(E,null,{default:t(()=>[Te]),_:1}),y("div",ze,[B.value?G("",!0):(d(),h(se,{key:0,size:"small",style:{width:"250px"},value:u(o).background,"onUpdate:value":l[3]||(l[3]=n=>u(o).background=n),showPreview:!0,swatches:X},null,8,["value"]))])]),_:1}),e(F,null,{default:t(()=>[e(E,null,{default:t(()=>[xe]),_:1}),e(le,{size:"small",style:{width:"250px"},value:S.value,"onUpdate:value":[l[4]||(l[4]=n=>S.value=n),q],disabled:!u(o).backgroundImage,options:Y},null,8,["value","disabled"])]),_:1}),e(F,null,{default:t(()=>[e(E,null,{default:t(()=>[Oe]),_:1}),e(I,{class:"clear-btn",size:"small",disabled:!u(o).backgroundImage,onClick:J},{default:t(()=>[Ue]),_:1},8,["disabled"]),e(I,{class:"clear-btn",size:"small",disabled:!u(o).background,onClick:Z},{default:t(()=>[Re]),_:1},8,["disabled"])]),_:1}),e(F,null,{default:t(()=>[e(E,null,{default:t(()=>[Pe]),_:1}),e(ce,null,{default:t(()=>[(d(),b(V,null,$(W,n=>e(I,{key:n.key,type:u(o).previewScaleType===n.key?"primary":"tertiary",ghost:"",size:"small",onClick:Ge=>te(n.key)},{default:t(()=>[e(ie,{"show-arrow":!1,trigger:"hover"},{trigger:t(()=>[e(P,{class:"select-preview-icon",size:"18"},{default:t(()=>[(d(),h(x(n.icon)))]),_:2},1024)]),default:t(()=>[_(" "+T(n.desc),1)]),_:2},1024)]),_:2},1032,["type","onClick"])),64))]),_:1})]),_:1})]),_:1}),e(u(we),{isCanvas:!0,chartStyles:u(o)},null,8,["chartStyles"]),e(re,{style:{margin:"10px 0"}}),e(_e,{class:"tabs-box",size:"small",type:"segment"},{default:t(()=>[(d(),b(V,null,$(K,n=>e(de,{key:n.key,name:n.key,size:"small","display-directive":"show:lazy"},{tab:t(()=>[e(F,null,{default:t(()=>[y("span",null,T(n.title),1),e(P,{size:"16",class:"icon-position"},{default:t(()=>[(d(),h(x(n.icon)))]),_:2},1024)]),_:2},1024)]),default:t(()=>[(d(),h(x(n.render)))]),_:2},1032,["name"])),64))]),_:1})])}}});var et=pe(Ne,[["__scopeId","data-v-63c1ec26"]]);export{et as default};
