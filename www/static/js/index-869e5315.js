var v=(p,f,u)=>new Promise((l,n)=>{var _=e=>{try{i(u.next(e))}catch(a){n(a)}},m=e=>{try{i(u.throw(e))}catch(a){n(a)}},i=e=>e.done?l(e.value):Promise.resolve(e.value).then(_,m);i((u=u.apply(p,f)).next())});import{M as D}from"./EditorWorker-a9d0b3e4.js";import"./editorWorker-a0599278.js";import{b as O,d as k,j as N,aQ as y,aR as b,S as V,r as s,o as S,c as I,f as t,w as o,p as R,u as c,E as T,Q as A,$ as J,g as d}from"./index-5427279b.js";import{g as L}from"./storage-8434c3ff.js";import{i as M}from"./icon-d6196121.js";const P={class:"go-edit"},j=d("\u9875\u9762\u5728\u7EBF\u7F16\u8F91\u5668"),G=d(" \u5BFC\u5165 "),H=d(" \u300C\u9875\u9762\u5931\u7126\u4FDD\u5B58\u300D "),K=d(" \u300Cctrl + s \u4FDD\u5B58\u300D "),Q=k({__name:"index",setup(p){const{ChevronBackOutlineIcon:f,DownloadIcon:u}=M.ionicons5,l=window.showOpenFilePicker;let n=N("");function _(){const e=L();n.value=JSON.stringify(e,void 0,2)}_();function m(){return v(this,null,function*(){const a=yield(yield l())[0].getFile(),r=new FileReader;r.readAsText(a),r.onloadend=()=>{n.value=(r.result||"").toString()}})}window.opener.addEventListener(y.CHART,e=>{b(V.GO_CHART_STORAGE_LIST,[e.detail]),n.value=JSON.stringify(e.detail,void 0,2)}),document.addEventListener("keydown",function(e){e.keyCode==83&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),i())}),addEventListener("blur",i);function i(){if(!window.opener)return window.$message.error("\u6E90\u7A97\u53E3\u5DF2\u5173\u95ED\uFF0C\u89C6\u56FE\u540C\u6B65\u5931\u8D25");try{const e=JSON.parse(n.value);delete e.id,window.opener.dispatchEvent(new CustomEvent(y.JSON,{detail:e}))}catch(e){window.$message.error("\u5185\u5BB9\u683C\u5F0F\u6709\u8BEF"),console.log(e)}}return(e,a)=>{const r=s("n-text"),C=s("n-icon"),E=s("n-button"),g=s("n-tag"),F=s("n-space"),h=s("n-layout-header"),x=s("n-layout-content"),B=s("n-layout");return S(),I("div",P,[t(B,null,{default:o(()=>[t(h,{class:"go-edit-header go-px-5 go-flex-items-center",bordered:""},{default:o(()=>[R("div",null,[t(r,{class:"go-edit-title go-mr-4"},{default:o(()=>[j]),_:1}),c(l)?(S(),T(E,{key:0,class:"go-mr-3",size:"medium",onClick:m},{icon:o(()=>[t(C,null,{default:o(()=>[t(c(u))]),_:1})]),default:o(()=>[G]),_:1})):A("",!0)]),t(F,null,{default:o(()=>[t(g,{bordered:!1,type:"warning"},{default:o(()=>[H]),_:1}),t(g,{bordered:!1,type:"warning"},{default:o(()=>[K]),_:1})]),_:1})]),_:1}),t(x,null,{default:o(()=>[t(c(D),{modelValue:c(n),"onUpdate:modelValue":a[0]||(a[0]=w=>J(n)?n.value=w:n=w),language:"json",editorOptions:{lineNumbers:"on",minimap:{enabled:!0}}},null,8,["modelValue"])]),_:1})]),_:1})])}}});var Y=O(Q,[["__scopeId","data-v-1ee7615d"]]);export{Y as default};
