import{u as te}from"./chartEditStore-53dc1709.js";import{by as re,aq as n,cp as $,cq as D,cr as U,aI as R,aH as P}from"./index-5427279b.js";var G={exports:{}};(function(a){(function(h){var o,s={},p={16:!1,18:!1,17:!1,91:!1},S="all",T={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,command:91},W={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},k=function(e){return W[e]||e.toUpperCase().charCodeAt(0)},E=[];for(o=1;o<20;o++)W["f"+o]=111+o;function v(e,t){for(var r=e.length;r--;)if(e[r]===t)return r;return-1}function N(e,t){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var F={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function x(e){for(o in p)p[o]=e[F[o]]}function B(e){var t,r,i,g,m,O;if(t=e.keyCode,v(E,t)==-1&&E.push(t),(t==93||t==224)&&(t=91),t in p){p[t]=!0;for(i in T)T[i]==t&&(K[i]=!0);return}if(x(e),!!K.filter.call(this,e)&&t in s){for(O=y(),g=0;g<s[t].length;g++)if(r=s[t][g],r.scope==O||r.scope=="all"){m=r.mods.length>0;for(i in p)(!p[i]&&v(r.mods,+i)>-1||p[i]&&v(r.mods,+i)==-1)&&(m=!1);(r.mods.length==0&&!p[16]&&!p[18]&&!p[17]&&!p[91]||m)&&r.method(e,r)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function z(e){var t=e.keyCode,r,i=v(E,t);if(i>=0&&E.splice(i,1),(t==93||t==224)&&(t=91),t in p){p[t]=!1;for(r in T)T[r]==t&&(K[r]=!1)}}function q(){for(o in p)p[o]=!1;for(o in T)K[o]=!1}function K(e,t,r){var i,g;i=M(e),r===void 0&&(r=t,t="all");for(var m=0;m<i.length;m++)g=[],e=i[m].split("+"),e.length>1&&(g=b(e),e=[e[e.length-1]]),e=e[0],e=k(e),e in s||(s[e]=[]),s[e].push({shortcut:i[m],scope:t,method:r,key:i[m],mods:g})}function Y(e,t){var r,i,g=[],m,O,_;for(r=M(e),O=0;O<r.length;O++){if(i=r[O].split("+"),i.length>1&&(g=b(i),e=i[i.length-1]),e=k(e),t===void 0&&(t=y()),!s[e])return;for(m=0;m<s[e].length;m++)_=s[e][m],_.scope===t&&N(_.mods,g)&&(s[e][m]={})}}function X(e){return typeof e=="string"&&(e=k(e)),v(E,e)!=-1}function j(){return E.slice(0)}function J(e){var t=(e.target||e.srcElement).tagName;return!(t=="INPUT"||t=="SELECT"||t=="TEXTAREA")}for(o in T)K[o]=!1;function Q(e){S=e||"all"}function y(){return S||"all"}function Z(e){var t,r,i;for(t in s)for(r=s[t],i=0;i<r.length;)r[i].scope===e?r.splice(i,1):i++}function M(e){var t;return e=e.replace(/\s/g,""),t=e.split(","),t[t.length-1]==""&&(t[t.length-2]+=","),t}function b(e){for(var t=e.slice(0,e.length-1),r=0;r<t.length;r++)t[r]=T[t[r]];return t}function L(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent&&e.attachEvent("on"+t,function(){r(window.event)})}L(document,"keydown",function(e){B(e)}),L(document,"keyup",z),L(window,"focus",q);var V=h.key;function ee(){var e=h.key;return h.key=V,e}h.key=K,h.key.setScope=Q,h.key.getScope=y,h.key.deleteScope=Z,h.key.filter=J,h.key.isPressed=X,h.key.getPressedKeyCodes=j,h.key.noConflict=ee,h.key.unbind=Y,a.exports=K})(re)})(G);var c=G.exports;const u=te(),w=a=>`${$.CTRL}+${a}`,A=a=>`${$.SHIFT}+${a}`,f={[n.ARROW_UP]:w("up"),[n.ARROW_RIGHT]:w("right"),[n.ARROW_DOWN]:w("down"),[n.ARROW_LEFT]:w("left"),[n.COPY]:w("c"),[n.CUT]:w("x"),[n.PARSE]:w("v"),[n.DELETE]:"delete",[n.BACK]:w("z"),[n.FORWORD]:w(A("z")),[n.GROUP]:w("g"),[n.UN_GROUP]:w(A("g")),[n.LOCK]:w("l"),[n.UNLOCK]:w(A("l")),[n.HIDE]:w("h"),[n.SHOW]:w(A("h"))},d=a=>`${D.CTRL}+${a}`,C=a=>`${D.SHIFT}+${a}`,l={[n.ARROW_UP]:d("arrowup"),[n.ARROW_RIGHT]:d("arrowright"),[n.ARROW_DOWN]:d("arrowdown"),[n.ARROW_LEFT]:d("arrowleft"),[n.COPY]:d("c"),[n.CUT]:d("x"),[n.PARSE]:d("v"),[n.DELETE]:d("backspace"),[n.BACK]:d("z"),[n.FORWORD]:d(C("z")),[n.GROUP]:d("g"),[n.UN_GROUP]:d(C("g")),[n.LOCK]:d("l"),[n.UNLOCK]:d(C("l")),[n.HIDE]:d("h"),[n.SHOW]:d(C("h"))},H=[f.up,f.right,f.down,f.left,f.delete,f.copy,f.cut,f.parse,f.back,f.forward,f.group,f.unGroup,f.lock,f.unLock,f.hide,f.show],I=[l.up,l.right,l.down,l.left,l.delete,l.copy,l.cut,l.parse,l.back,l.forward,l.group,l.unGroup,l.lock,l.unLock,l.hide,l.show],ne=()=>{window.$KeyboardActive={ctrl:!1},document.onkeydown=a=>{a.keyCode===17&&window.$KeyboardActive&&(U(a.keyCode),window.$KeyboardActive.ctrl=!0)},document.onkeyup=a=>{a.keyCode===17&&window.$KeyboardActive&&(window.$KeyboardActive.ctrl=!1,U())}},ie=()=>{const h=(o,s)=>{switch(s){case o.up:c(s,R(()=>(u.setMove(n.ARROW_UP),!1),50));break;case o.right:c(s,R(()=>(u.setMove(n.ARROW_RIGHT),!1),50));break;case o.down:c(s,R(()=>(u.setMove(n.ARROW_DOWN),!1),50));break;case o.left:c(s,R(()=>(u.setMove(n.ARROW_LEFT),!1),50));break;case o.delete:c(s,P(()=>(u.removeComponentList(),!1),50));break;case o.copy:c(s,P(()=>(u.setCopy(),!1),50));break;case o.cut:c(s,P(()=>(u.setCut(),!1),50));break;case o.parse:c(s,R(()=>(u.setParse(),!1),50));break;case o.back:c(s,R(()=>(u.setBack(),!1),50));break;case o.forward:c(s,R(()=>(u.setForward(),!1),50));break;case o.group:c(s,R(()=>(u.setGroup(),!1),50));break;case o.unGroup:c(s,R(()=>(u.setUnGroup(),!1),50));break;case o.lock:c(s,R(()=>(u.setLock(),!1),50));break;case o.unLock:c(s,R(()=>(u.setUnLock(),!1),50));break;case o.hide:c(s,R(()=>(u.setHide(),!1),50));break;case o.show:c(s,R(()=>(u.setShow(),!1),50));break}};H.forEach(o=>{h(f,o)}),I.forEach(o=>{h(l,o)}),ne()},ae=()=>{document.onkeydown=()=>{},document.onkeyup=()=>{},H.forEach(a=>{c.unbind(a)}),I.forEach(a=>{c.unbind(a)})};export{ie as a,ae as u};
